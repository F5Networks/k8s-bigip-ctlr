stages:
  - Build
#  - Test
#  - Test-cluster-mode
#  - Test-nodeport-mode

Build-Image:
  tags:
    - docker-executor
  stage: Build
  image: ${DOCKER_BUILDER}
  script:
    - apk update
    - apk add git make python coreutils bash sudo
    - export USER=$(whoami)
#    - adduser -D user -s /bin/bash
    - bash -c "make prod-build"
#    - git clone https://github.com/F5Networks/k8s-bigip-ctlr.git
#    - cd k8s-bigip-ctlr
#    - bash -c "make prod-build"
#    - docker tag ${SOURCE_IMAGE} ${BUILD_TAG}
#    - docker push ${TARGET_IMAGE}

#Run-Regression:
#  tags:
#    - docker-executor
#  stage: Test
#  image: centos
#  script:
#    - sudo yum upgrade openssh -y
#    - sudo yum install wget, make, openssh, python, py-pip, gcc, python2-dev, musl-dev, libffi-dev, openssl-dev -y
#    - sudo pip install ansible==2.6.5
